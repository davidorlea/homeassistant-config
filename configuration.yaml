homeassistant:
  name: !secret homeassistant_name
  latitude: !secret homeassistant_latitude
  longitude: !secret homeassistant_longitude
  elevation: !secret homeassistant_elevation
  unit_system: metric
  time_zone: !secret homeassistant_time_zone
  customize: !include customize.yaml
  customize_glob: !include customize_glob.yaml

logger:
  default: warning
  logs:
    homeassistant.components.http.ban: warning

frontend:
  javascript_version: latest

map:

config:

http:
  server_port: !secret http_server_port
  api_password: !secret http_api_password
  use_x_forwarded_for: true
  trusted_networks:
    - 127.0.0.1
    - 192.168.178.0/24
  ip_ban_enabled: true
  login_attempts_threshold: 5

updater:
  reporting: false

influxdb:
  host: !secret influxdb_host
  username: !secret influxdb_username
  password: !secret influxdb_password
  database: !secret influxdb_database
  include:
    entities:
      - sensor.fritz_netmonitor
      - sensor.owm_temperature
      - sensor.owm_humidity
      - sensor.owm_cloud_coverage
      - sensor.owm_pressure
  component_config:
    sensor.fritz_netmonitor:
      override_measurement: 'sensor.fritz_netmonitor'
    sensor.owm_temperature:
      override_measurement: 'sensor.owm_temperature'
    sensor.owm_humidity:
      override_measurement: 'sensor.owm_humidity'
    sensor.owm_cloud_coverage:
      override_measurement: 'sensor.owm_cloud_coverage'
    sensor.owm_pressure:
      override_measurement: 'sensor.owm_pressure'

recorder:
  purge_interval: 1
  purge_keep_days: 3
  db_url: !secret recorder_db_url
  exclude:
    domains:
      - group
      - media_player
      - sun
      - weather
    entities:
      - script.occupancy_simulation_start
      - script.occupancy_simulation_stop
      - script.occupancy_simulation_loop
      - sensor.moon
      - sensor.average_load_1m
      - sensor.average_load_5m
      - sensor.average_load_15m
      - sensor.cpu_used
      - sensor.disk_used_
      - sensor.owm_condition
      - sensor.owm_forecast
      - sensor.ram_used
      - sensor.since_last_boot
      - sensor.uptime
      - sensor.fritz_bytes_received
      - sensor.fritz_bytes_sent
      - sensor.outdoor_frontdoor_light_uptime
      - sensor.outdoor_frontdoor_light_firmware
      - sensor.outdoor_frontdoor_light_wifi_ip
      - sensor.outdoor_backdoor_light_uptime
      - sensor.outdoor_backdoor_light_firmware
      - sensor.outdoor_backdoor_light_wifi_ip
      - sensor.kitchen_ceiling_light_uptime
      - sensor.kitchen_ceiling_light_firmware
      - sensor.kitchen_ceiling_light_wifi_ip
      - sensor.kitchen_sideboard_light_uptime
      - sensor.kitchen_sideboard_light_firmware
      - sensor.kitchen_sideboard_light_wifi_ip
      - sensor.kitchen_cabinet_light_uptime
      - sensor.kitchen_cabinet_light_firmware
      - sensor.kitchen_cabinet_light_wifi_ip
      - sensor.living_room_ceiling_light_uptime
      - sensor.living_room_ceiling_light_firmware
      - sensor.living_room_ceiling_light_wifi_ip
      - sensor.living_room_sofa_light_uptime
      - sensor.living_room_sofa_light_firmware
      - sensor.living_room_sofa_light_wifi_ip
      - sensor.hall_ceiling_light_uptime
      - sensor.hall_ceiling_light_firmware
      - sensor.hall_ceiling_light_wifi_ip
      - switch.development_module_relay

history:
  exclude:
    domains:
      - automation
      - script

logbook:

sun:

tts:
  platform: google
  cache: true
  cache_dir: /tmp/tts
  time_memory: 300
  language: 'de'

zone:
  name: Home
  latitude: !secret homeassistant_latitude
  longitude: !secret homeassistant_longitude
  radius: 100
  icon: mdi:home

mqtt:
  broker: !secret mqtt_broker
  port: !secret mqtt_port
  client_id: !secret mqtt_client_id
  username: !secret mqtt_username
  password: !secret mqtt_password
  birth_message:
    topic: 'home-assistant-1/$online'
    payload: 'true'
    qos: 2
    retain: false
  will_message:
    topic: 'home-assistant-1/$online'
    payload: 'false'
    qos: 2
    retain: false

mqtt_eventstream:
  publish_topic: 'home-assistant-1/$eventstream/publish'
  subscribe_topic: 'home-assistant-1/$eventstream/subscribe'

device_tracker:
  - platform: fritz
    interval_seconds: 15
    consider_home: 300
    track_new_devices: false
  - platform: owntracks
    max_gps_accuracy: 100
  - platform: owntracks_http
    max_gps_accuracy: 100

media_player:
  - platform: sonos
    scan_interval: 20
    hosts:
      - 192.168.178.22
      - 192.168.178.30
    entity_namespace: 'sonos_device'

google_assistant:
  project_id: !secret google_assistant_project_id
  client_id: !secret google_assistant_client_id
  access_token: !secret google_assistant_access_token
  expose_by_default: false

automation: !include automations.yaml

binary_sensor: !include binary_sensors.yaml

group: !include groups.yaml

input_boolean: !include input_boolean.yaml

light: !include lights.yaml

sensor: !include sensors.yaml

scene: !include scenes.yaml

script: !include scripts.yaml

switch: !include switchs.yaml
