tts_test:
  alias: "TTS Test"
  sequence:
    - service: script.sonos_say
      data_template:
        sonos_say_message: 'Hallo, das ist ein Test.'

tts_watch_the_next_bus:
  alias: "TTS Watch the Next Bus"
  sequence:
    - service: script.sonos_say
      data_template:
        sonos_say_message: 'Ich werde dich nun über den nächsten Bus informieren.'

tts_time_to_next_bus:
  alias: "TTS Time to Next Bus"
  sequence:
    - service: script.sonos_say
      data_template:
        sonos_say_message: >-
          {% set state = states("sensor.next_bus_time") | int(-1) %}
          {% if state >= 2 %}
            Der nächste Bus fährt in {{ state }} Minuten ab.
          {% elif state == 1 %}
            Der nächste Bus fährt in einer Minute ab.
          {% elif state == 0 %}
            Der nächste Bus fährt jeden Moment ab.
          {% else %}
            Über den nächsten Bus ist nichts bekannt.
          {% endif %}

tts_weather:
  alias: "TTS Weather"
  sequence:
    - service: script.sonos_say
      data_template:
        sonos_say_message: >-
          Aktuell
          {% if states.weather.dark_sky.state == 'cloudy' %}
            ist es bewölkt
          {% elif states.weather.dark_sky.state == 'fog' %}
            ist es nebelig
          {% elif states.weather.dark_sky.state == 'hail' %}
            hagelt es
          {% elif states.weather.dark_sky.state == 'lightning' %}
            gewittert es
          {% elif states.weather.dark_sky.state == 'lightning-rainy' %}
            gewittert und regnet es
          {% elif states.weather.dark_sky.state == 'partlycloudy' %}
            ist es teilweise bewölkt
          {% elif states.weather.dark_sky.state == 'pouring' %}
            regnet es stark
          {% elif states.weather.dark_sky.state == 'rainy' %}
            ist es regnerisch
          {% elif states.weather.dark_sky.state == 'snowy' %}
            schneit es
          {% elif states.weather.dark_sky.state == 'snowy-rainy' %}
            schneit es
          {% elif states.weather.dark_sky.state == 'sunny' %}
            ist es sonnig
          {% elif states.weather.dark_sky.state == 'windy' %}
            ist es windig
          {% elif states.weather.dark_sky.state == 'windy-variant' %}
            ist es windig
          {% endif %}
          und die Temperaturen liegen bei {{ states.weather.dark_sky.attributes.temperature | int }} Grad. Tagsüber
          erreichen sie heute Höchstwerte um {{ states.weather.dark_sky.attributes.forecast[0].temperature | int }} Grad
          und nachts sinken sie auf Tiefstwerte um {{ states.weather.dark_sky.attributes.forecast[0].templow | int }}
          Grad. Der Wind weht dabei
          {% if states.weather.dark_sky.attributes.wind_speed >= 117 %}
            orkanartig
          {% elif states.weather.dark_sky.attributes.wind_speed >= 102 %}
            orkanartig
          {% elif states.weather.dark_sky.attributes.wind_speed >= 88 %}
            schwer
          {% elif states.weather.dark_sky.attributes.wind_speed >= 74 %}
            stürmisch bis schwer
          {% elif states.weather.dark_sky.attributes.wind_speed >= 61 %}
            stürmisch
          {% elif states.weather.dark_sky.attributes.wind_speed >= 49 %}
            stark bis stürmisch
          {% elif states.weather.dark_sky.attributes.wind_speed >= 38 %}
            stark
          {% elif states.weather.dark_sky.attributes.wind_speed >= 28 %}
            mäßig bis stark
          {% elif states.weather.dark_sky.attributes.wind_speed >= 19 %}
            mäßig
          {% elif states.weather.dark_sky.attributes.wind_speed >= 11 %}
            schwach
          {% elif states.weather.dark_sky.attributes.wind_speed >= 5 %}
            leicht bis schwach
          {% elif states.weather.dark_sky.attributes.wind_speed >= 0 %}
            leicht
          {% endif %}
          aus
          {% if states.weather.dark_sky.attributes.wind_bearing >= 337.5 %}
            nördlicher
          {% elif states.weather.dark_sky.attributes.wind_bearing >= 292.5 %}
            nordwestlicher
          {% elif states.weather.dark_sky.attributes.wind_bearing >= 247.5 %}
            westlicher
          {% elif states.weather.dark_sky.attributes.wind_bearing >= 202.5 %}
            südwestlicher
          {% elif states.weather.dark_sky.attributes.wind_bearing >= 157.5 %}
            südlicher
          {% elif states.weather.dark_sky.attributes.wind_bearing >= 112.5 %}
            südöstlicher
          {% elif states.weather.dark_sky.attributes.wind_bearing >= 67.5 %}
            östlicher
          {% elif states.weather.dark_sky.attributes.wind_bearing >= 22.5 %}
            nördöstlicher
          {% elif states.weather.dark_sky.attributes.wind_bearing >= 0 %}
            nördlicher
          {% endif %}
          Richtung. Der Pollenflug ist heute für Gräser
          {% if states.sensor.dwd_pollen_today_41_grass.state | int == 0 %}
            unauffällig
          {% elif states.sensor.dwd_pollen_today_41_grass.state | int == 17 %}
            unauffällig bis gering
          {% elif states.sensor.dwd_pollen_today_41_grass.state | int == 33 %}
            gering
          {% elif states.sensor.dwd_pollen_today_41_grass.state | int == 50 %}
            gering bis mittel
          {% elif states.sensor.dwd_pollen_today_41_grass.state | int == 67 %}
            mittel
          {% elif states.sensor.dwd_pollen_today_41_grass.state | int == 83 %}
            mittel bis hoch
          {% elif states.sensor.dwd_pollen_today_41_grass.state | int == 100 %}
            hoch
          {% endif %}
          und für Bäume
          {% if states.sensor.dwd_pollen_today_41_tree.state | int == 0 %}
            unauffällig.
          {% elif states.sensor.dwd_pollen_today_41_tree.state | int == 17 %}
            unauffällig bis gering.
          {% elif states.sensor.dwd_pollen_today_41_tree.state | int == 33 %}
            gering.
          {% elif states.sensor.dwd_pollen_today_41_tree.state | int == 50 %}
            gering bis mittel.
          {% elif states.sensor.dwd_pollen_today_41_tree.state | int == 67 %}
            mittel.
          {% elif states.sensor.dwd_pollen_today_41_tree.state | int == 83 %}
            mittel bis hoch.
          {% elif states.sensor.dwd_pollen_today_41_tree.state | int == 100 %}
            hoch.
          {% endif %}
